---
title: 读《深入理解计算机系统》- 信息的表示与处理
slug: notes-of-csapp-info
date: 2020-05-24
description: 《深入理解计算机系统》读书笔记
tags:
  - Note
---

## 信息存储

位 bit：二进制数字

字节 byte：8 位的块

机器级程序视存储器为一个非常大的字节数组，称为虚拟存储器，下标就是地址，所有可能地址的集合就是虚拟地址空间，编译器和运行时将存储器分为可管理的单元，来存放程序对象（数据、指令、控制信息），对于不同单元的分配和管理在虚拟地址空间中完成

### 16 进制

```text
16 进制：0x 8    F    7    A    9    3
2 进制：    1000 1111 0111 1010 1001 0011
```

```text
16 进制：0x C    4    E    5    D
2 进制：    1100 0100 1110 0101 1101
```

```text
2 进制：    1011 0111 1001 1100
16 进制：0x B    7    9    C
```

```text
2 进制：    11 0101 1011 0111 1110 0110
16 进制：0x 3  5    B    7    E    6
```

16 进制的 0 代表 4 个 2 进制的 0，可以把 $x^n$ 中的 $n$ 写成 $i+4j$ 的形式，得到 $x$ 的 16 进制为：$2^i$ 后面跟 $j$ 个 0

| $n$ | $2^n$（十进制）| $2^n$（十六进制）|
|---|---|---|
| 11 | 2048 | 0x800（3 + 4 * 2）|
| 7 | 128 | 0x80（3 + 4 * 1）|
| 13 | 8129 | 0x2000（1 + 4 * 3）|

十进制转换为十六进制：`76 = 4 * 16 + 12(C), 4 = 0 * 16 + 4(4), 76 => 0x4C`

| 十进制 | 二进制 | 十六进制 |
|---|---|---|
| 243 | 11110011 | 0xF3 |
| 55 | 110111 | 37 |

### 字

字长：32 位、64 位，字长为 n 位的机器其虚拟地址范围是 $0$ ~ $2^n - 1$，程序最多访问 $2^n$ 字节，比如 32 位计算机虚拟地址空间为 $2^{32}=4*2^{30}=4GB$

### 数据大小

![C 语言中数据类型大小](./images/2-c-length.png)

### 寻址和字节顺序

int 类型地址在 0x100，存 0x01234567：

```text
大端法: 0x100 0x101 0x102 0x103
        01    23    45    67

小端法: 0x100 0x101 0x102 0x103
(Intel) 67    45    23    01
```

```c:title=byte_pointer.c
#include <stdio.h>
#include <stdlib.h>

typedef unsigned char *byte_pointer; // 定义类型

void show_bytes(byte_pointer start, int len) {
 int i;
 for (i = 0; i < len; i++)
   printf(" %.2x", start[i]);
  printf("\n");
}

void show_int(int x) {
  show_bytes((byte_pointer) &x, sizeof(int));
}

void show_float(float x) {
  show_bytes((byte_pointer) &x, sizeof(float));
}

void show_pointer(void *x) {
  show_bytes((byte_pointer) &x, sizeof(void *));
}

int main(int argc, char *argv[]) { // argc 命令行参数个数，argv 命令行参数
  printf(" %s\n", argv[1]);

  int int_value = atoi(argv[1]); // char * 转 int
  float float_value = (float) int_value; // 强制类型转换
  int *pointer_value = &int_value;

  show_int(int_value);
  show_float(float_value);
  show_pointer(pointer_value);

  return 0;
}
```

```shell
$ gcc byte_pointer.c -o byte_pointer
$ byte_pointer 12345
 12345
 39 30 00 00
 00 e4 40 46
 7c 32 6d e2 fe 7f 00 00
```

int 12345 十六进制是 0x00003039，float 12345 表示为 0x4640E400，其中有 13 位相匹配

![int 12345 与 float 12345 有 13 位相匹配](./images/2-byte_pointer.png)

### 表示字符串

// TODO